<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Add recipe</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <header><a href="index.html">‚Üê Back</a></header>

    <div class="container">
        <h2>Add recipe</h2>
        <form id="addForm">
            <input id="title" placeholder="Title" required />
            <input id="image" placeholder="Image URL (optional)" />
            <textarea id="ingredients" placeholder="Ingredients" required></textarea>
            <textarea id="instructions" placeholder="Instructions" required></textarea>
            <button class="btn primary">Add recipe</button>

        </form>
        <small id="msg"></small>
    </div>

    <script>
        const API = "http://localhost:5000";
        document.getElementById("addForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const token = localStorage.getItem("token");
            const res = await fetch(`${API}/api/recipes`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${token}`
                },
                body: JSON.stringify({
                    title: title.value,
                    ingredients: ingredients.value,
                    instructions: instructions.value
                }),
                body: JSON.stringify({
                    title: title.value,
                    ingredients: ingredients.value,
                    instructions: instructions.value,
                    image: image.value
                })

            });
            const data = await res.json();
            msg.textContent = data._id ? "Added!" : (data.message || "Error");
        });
    </script>
</body>

</html>